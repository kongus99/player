<html>

<head>
  <meta charset="utf-8" />
  <title>Playlists</title>
  <script type='text/javascript' src='playlist.js'></script>
  <script type='text/javascript' src='js/ElmLocalStoragePorts.js'></script>
  <script type='text/javascript' src='js/player.js'></script>
</head>

<body>
  <div id="elm"></div>
  <div id="player"></div>
  <script type='text/javascript'>
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    function onYouTubeIframeAPIReady() {
      var app = Elm.Playlist.embed(document.getElementById('elm'));
      var ElmYoutubePlayer = new Player('player', '', (p) => (e) => {
        if(e.data === 0) 
          e.target.playVideo();
        console.log(e);
      });
      ElmLocalStoragePorts.subscribe(app);
      ElmYoutubePlayer.subscribe(app);
    }
  </script>

</body>

</html>